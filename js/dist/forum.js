(()=>{var t={656:()=>{},472:(t,e,r)=>{"use strict";const o=flarum.core.compat.Model;var i=r.n(o);const s=flarum.core.compat["models/Discussion"];var a=r.n(s);const n=flarum.core.compat["tags/models/Tag"];var l=r.n(n);const c=flarum.core.compat["common/extend"],u=flarum.core.compat["v17development/blog/components/BlogItemSidebar"];var p=r.n(u);function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function f(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,d(t,e)}const v=flarum.core.compat["common/Component"];var g=r.n(v);const h=flarum.core.compat["components/Link"];var b=r.n(h),S=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var r=e.prototype;return r.view=function(){if(null==this.attrs.discussion)return"";var t=this.attrs.discussion.articleSeries();if(!t)return"";var e=t.articles();return m("div",{className:"BlogArticleList BlogSideWidget"},m("h3",null,app.translator.trans("askvortsov-article-series.forum.article_list.title",{series:m(b(),{href:app.route("blogCategory",{slug:t.slug()})},t.name())})),e&&e.sort((function(t,e){return t.articleSeriesOrder()-e.articleSeriesOrder()})).map(this.articleItem))},r.articleItem=function(t,e){return m(b(),{href:app.route("blogArticle",{id:t.slug()}),className:"BlogSideWidget-item BlogSideWidget-item-"+t.id()},e+1,". ",m.route.param("id")===t.slug()?m("strong",null,t.title()):t.title())},e}(g());const y=flarum.core.compat["v17development/blog/pages/BlogItem"];var _=r.n(y);const O=flarum.core.compat["common/components/LinkButton"];var B=r.n(O);const x=flarum.core.compat["common/components/Button"];var k=r.n(x);const N=flarum.core.compat["forum/utils/DiscussionControls"];var I=r.n(N);const A=flarum.core.compat["v17development/blog/components/BlogPostController"];var P=r.n(A);const M=flarum.core.compat["common/components/Modal"];var j=r.n(M);const F=flarum.core.compat["common/components/Select"];var L=r.n(F);const C=flarum.core.compat["common/utils/Stream"];var w=r.n(C),D=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var r=e.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e);var r=this.attrs.discussion.articleSeries();this.articleSeriesId=w()(r?r.id():"NULL"),this.articleSeriesOrder=w()(this.attrs.discussion.articleSeriesOrder()||0)},r.className=function(){return"ArticleSeriesModal Modal--small"},r.title=function(){return app.translator.trans("askvortsov-article-series.forum.article_series_modal.title")},r.content=function(){var t=this.attrs.discussion.tags().filter((function(t){return t.isArticleSeries()})).reduce((function(t,e){return t[e.id()]=e.name(),t}),{});return t.NULL="None",m("div",{className:"Modal-body"},m("div",{className:"Form Form--centered"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-article-series.forum.article_series_modal.tag_id_label")),m(L(),{value:this.articleSeriesId(),onchange:this.articleSeriesId,options:t})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-article-series.forum.article_series_modal.order_label")),m("input",{className:"FormControl",bidi:this.articleSeriesOrder,type:"number"})),m("div",{className:"Form-group"},k().component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading},app.translator.trans("askvortsov-article-series.forum.article_series_modal.submit_button")))))},r.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.attrs.discussion.save({articleSeriesId:parseInt(this.articleSeriesId())||null,articleSeriesOrder:this.articleSeriesOrder()}).finally((function(){e.loading=!1,m.redraw()}))},e}(j());function T(t,e){t.add("article-series-settings",m(k(),{icon:"fas fa-book",onclick:function(){return app.modal.show(D,{discussion:e})}},app.translator.trans("askvortsov-article-series.forum.discussion_controls.article_series_button")))}app.initializers.add("litalino/flarum-blog-article-series",(function(){a().prototype.articleSeriesOrder=i().attribute("articleSeriesOrder"),a().prototype.articleSeries=i().hasOne("articleSeries"),l().prototype.isArticleSeries=i().attribute("isArticleSeries"),l().prototype.articles=i().hasMany("articles"),(0,c.extend)(p().prototype,"items",(function(t){var e=t.get("author");t.remove("author"),t.add("author",e,"phone"===app.screen()?5:20),t.add("article-list",m(S,{discussion:this.attrs.article}),10)})),(0,c.extend)(P().prototype,"manageArticleButtons",(function(t){return T(t,this.attrs.article)})),(0,c.extend)(I(),"userControls",T),(0,c.extend)(_().prototype,"postItems",(function(t){var e,r=this,o=null==(e=this.article)?void 0:e.articleSeries();if(o&&!(o.articles().length<=1)){var i=o.articles().sort((function(t,e){return t.articleSeriesOrder()-e.articleSeriesOrder()})),s=i.findIndex((function(t){return t.id()===r.article.id()}));t.add("nextPrevButtons",m("div",{class:"FlarumBlog-Article-Post--nextPrevButtons"},0===s?m("div",null):m(B(),{icon:"fas fa-chevron-left",href:app.route("blogArticle",{id:i[s-1].slug()})},app.translator.trans("askvortsov-article-series.forum.article_item.prev_article")),s+1===o.articles().length?m("div",null):m(B(),{icon:"fas fa-chevron-right",href:app.route("blogArticle",{id:i[s+1].slug()})},app.translator.trans("askvortsov-article-series.forum.article_item.next_article"))))}}))}))}},e={};function r(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{"use strict";r.r(o);var t=r(656),e={};for(const r in t)"default"!==r&&(e[r]=()=>t[r]);r.d(o,e),r(472)})(),module.exports=o})();
//# sourceMappingURL=forum.js.map